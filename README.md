# LarkBot

## é¡¹ç›®ç®€ä»‹

LarkBot æ˜¯ä¸€ä¸ªåŸºäº Java çš„é£ä¹¦ç¾¤èŠæœºå™¨äººï¼Œæ”¯æŒ Markdown ç¼–è¾‘ã€å›¾ç‰‡ä¸Šä¼ ã€è‡ªåŠ¨å‘å¸ƒåˆ° WordPressï¼Œå¹¶é›†æˆè…¾è®¯äº‘ COS ä½œä¸ºå›¾ç‰‡å­˜å‚¨ã€‚é€‚ç”¨äºéœ€è¦åœ¨é£ä¹¦ç¾¤å†…åä½œç¼–è¾‘å¹¶è‡ªåŠ¨å‘å¸ƒå†…å®¹åˆ° WordPress çš„åœºæ™¯ã€‚

æœªæ¥å¯èƒ½ä¼šæ‰©å±•åŠŸèƒ½åŸºäºé£ä¹¦æœºå™¨äººæ„å»ºç§äººç”Ÿæ´»åŠ©æ‰‹ï¼ŒåŒ…æ‹¬ç†è´¢ã€æ—¥ç¨‹ã€ä»»åŠ¡ç­‰åœºæ™¯
## ä¸»è¦åŠŸèƒ½

- **é£ä¹¦ç¾¤æ¶ˆæ¯ç›‘å¬**ï¼šè‡ªåŠ¨ç›‘å¬æŒ‡å®šç¾¤èŠæ¶ˆæ¯ï¼Œæ”¯æŒæ–‡æœ¬å’Œå›¾ç‰‡ã€‚
- **Markdown ç¼–è¾‘æ¨¡å¼**ï¼šç¾¤æˆå‘˜å¯é€šè¿‡æŒ‡ä»¤è¿›å…¥ Markdown ç¼–è¾‘æ¨¡å¼ï¼Œåˆ†æ®µè¾“å…¥å†…å®¹ï¼Œæ”¯æŒè®¾ç½®æ ‡é¢˜ã€æ’å…¥å›¾ç‰‡ã€‚
- **ä¸€é”®å‘å¸ƒ WordPress**ï¼šç¼–è¾‘å®Œæˆåï¼Œè‡ªåŠ¨å°†å†…å®¹ä»¥ HTML æ ¼å¼å‘å¸ƒåˆ°æŒ‡å®š WordPress ç«™ç‚¹ã€‚
- **å›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ **ï¼šç¾¤å†…å‘é€çš„å›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ è‡³è…¾è®¯äº‘ COSï¼Œå¹¶åœ¨æ–‡ç« ä¸­å¼•ç”¨ã€‚
- **é…ç½®çµæ´»**ï¼šæ‰€æœ‰æ•æ„Ÿä¿¡æ¯å’Œå‚æ•°å‡é€šè¿‡ `config.properties` é…ç½®æ–‡ä»¶ç®¡ç†ã€‚

## å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

### 2. æ„å»ºé¡¹ç›®

æœ¬é¡¹ç›®åŸºäº Maven æ„å»ºï¼Œéœ€ JDK 17+ã€‚

```bash
mvn clean package
```


### 4. ä¿®æ”¹é…ç½®
ä¿®æ”¹jaråŒ…åŒç›®å½•ä¸‹çš„config.properties

#### ğŸ›  é£ä¹¦åº”ç”¨é…ç½®
| å‚æ•°            | è¯´æ˜                        | ç¤ºä¾‹å€¼ |
|-----------------|---------------------------|-----|
| larkAppId       | é£ä¹¦å¼€æ”¾å¹³å°åº”ç”¨çš„ App ID      | N/A |
| larkAppSecret   | é£ä¹¦å¼€æ”¾å¹³å°åº”ç”¨çš„ App Secret  | N/A |

> è·å–æ–¹å¼ï¼šåœ¨[é£ä¹¦å¼€æ”¾å¹³å°](https://open.feishu.cn/)åˆ›å»ºåº”ç”¨åè·å–

#### ğŸ–¥ WordPress é…ç½®
| å‚æ•°                | è¯´æ˜                          | ç¤ºä¾‹å€¼                   |
|--------------------|-----------------------------|-----------------------|
| wordpressUrl       | WordPress ç«™ç‚¹åœ°å€            | https://www.mareep.cn |
| wordpressUsername  | åå°ç®¡ç†å‘˜è´¦å·                 | N/A                   |
| wordpressPassword  | åå°ç®¡ç†å‘˜å¯†ç                  | N/A                   |
| wordpressGroupId   | ç»‘å®šçš„é£ä¹¦ç¾¤ç»„ID               | N/A                   |

> æ³¨æ„ï¼šGroupId æ ¼å¼ä¸º `oc_` å¼€å¤´çš„32ä½å­—ç¬¦ä¸²ï¼Œå¯é€šè¿‡é£ä¹¦APIè·å–

#### â˜ï¸ å›¾åºŠé…ç½®
| å‚æ•°                      | è¯´æ˜                    | ç¤ºä¾‹å€¼                            |
|--------------------------|-----------------------|--------------------------------|
| imageStorageProvider     | å›¾ç‰‡å­˜å‚¨æœåŠ¡å•†             | TencentCOS/AliyunOSS                    |
| imageBaseUrl             | å›¾ç‰‡è®¿é—®åŸºç¡€URL           | https://image.mareep.cn/image/ |
##### è…¾è®¯äº‘
| å‚æ•°                      | è¯´æ˜                    | ç¤ºä¾‹å€¼                            |
|--------------------------|-----------------------|--------------------------------|
| tencentCloudSecretId     | è…¾è®¯äº‘è®¿é—®å¯†é’¥ ID          | N/A                            |
| tencentCloudSecretKey    | è…¾è®¯äº‘è®¿é—®å¯†é’¥ Key         | N/A                            |
| tencentCloudBucketName   | COS å­˜å‚¨æ¡¶åç§°           | N/A                            |
| tencentCloudRegion       | å­˜å‚¨æ¡¶æ‰€å±åœ°åŸŸ            | ap-nanjing                     |
| tencentCloudImagePath    | å›¾ç‰‡å­˜å‚¨è·¯å¾„              | image/                         |
##### é˜¿é‡Œäº‘
| å‚æ•°                      | è¯´æ˜                 | ç¤ºä¾‹å€¼                            |
|--------------------------|--------------------|--------------------------------|
| AliyunAccessKeyID     | é˜¿é‡Œäº‘è®¿é—®å¯†é’¥ ID         | N/A                            |
| AliyunAccessKeySecret    | é˜¿é‡Œäº‘è®¿é—®å¯†é’¥ Key        | N/A                            |
| AliyunOssBucketName   | COS å­˜å‚¨æ¡¶åç§°          | N/A                            |
| AliyunOssRegion       | å­˜å‚¨æ¡¶æ‰€å±åœ°åŸŸ            | ap-nanjing                     |
| AliyunOssEndpoint    | ä½ çš„OSSæ‰€å±åœ°åŸŸçš„endpoint |  https://oss-cn-hangzhou.aliyuncs.com                        |
| AliyunImagePath    | å›¾ç‰‡å­˜å‚¨è·¯å¾„(æ¡¶å†…)         | image/                         |
> åˆ›å»ºæŒ‡å¼•ï¼š
> 1. ç™»å½•[è…¾è®¯äº‘æ§åˆ¶å°](https://console.cloud.tencent.com/)
> 2. åˆ›å»º COS å­˜å‚¨æ¡¶ï¼Œç¡®ä¿åœ°åŸŸä¸é…ç½®ä¸€è‡´
> 3. åœ¨[è®¿é—®ç®¡ç†](https://console.cloud.tencent.com/cam/capi)åˆ›å»ºAPIå¯†é’¥

#### â™»ï¸ ä½¿ç”¨æ³¨æ„äº‹é¡¹
1. å®‰å…¨ä¿å¯†ï¼šè¯·å‹¿å°† `SecretId`/`SecretKey` å’Œ `AppSecret` æäº¤è‡³å…¬å¼€ä»“åº“
2. è·¯å¾„åŒ¹é…ï¼š`ImagePath` éœ€è¦ä»¥ `/` ç»“å°¾ï¼Œå¹¶ä¸ `imageBaseUrl` è·¯å¾„å±‚çº§ä¿æŒä¸€è‡´
3. æƒé™æ£€æŸ¥ï¼šç¡®ä¿é£ä¹¦åº”ç”¨å·²å¼€é€šã€Œæ¶ˆæ¯ä¸ç¾¤ç»„ã€ç­‰å¿…è¦æƒé™

### 3. è¿è¡Œ



## ç¾¤èŠæŒ‡ä»¤è¯´æ˜

- `/edit` è¿›å…¥ Markdown ç¼–è¾‘æ¨¡å¼
- `/title æ ‡é¢˜` è®¾ç½®æ–‡ç« æ ‡é¢˜
- å‘é€æ–‡æœ¬ï¼šæ·»åŠ ä¸ºæ®µè½
- å‘é€å›¾ç‰‡ï¼šè‡ªåŠ¨ä¸Šä¼ å¹¶æ’å…¥
- `/done` å®Œæˆç¼–è¾‘å¹¶å‘å¸ƒåˆ° WordPress
- `/exit` é€€å‡ºç¼–è¾‘æ¨¡å¼

## ä¾èµ–

- [é£ä¹¦å¼€æ”¾å¹³å° Java SDK (oapi-sdk)](https://github.com/larksuite/oapi-sdk-java)
- [flexmark-all](https://github.com/vsch/flexmark-java)ï¼ˆMarkdown è½¬ HTMLï¼‰
- [log4j2](https://logging.apache.org/log4j/2.x/)
- [è…¾è®¯äº‘ COS Java SDK](https://github.com/tencentyun/cos-java-sdk-v5)
- ...

è¯¦è§ `pom.xml`ã€‚

## ç›®å½•ç»“æ„

- `src/main/java/cn/mareep/larkbot/` ä¸»è¦ä»£ç 
- `src/main/resources/` èµ„æºæ–‡ä»¶
- `config.properties` é…ç½®æ–‡ä»¶

## ä½œè€…

- Mareep

## è®¸å¯è¯

MIT License 